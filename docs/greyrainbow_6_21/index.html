<!DOCTYPE html>
<!--
Developed by dataout.org

Released under the CC-BY-SA 4.0 license
-->
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Table 6.21 / Developed for greyrainbow.dataout.org</title>

<link rel="stylesheet" href="style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>

<body>

<div class="container-fluid" id="github_description">
  <p id="text_description">
    This page is developed for the website greyrainbow.dataout.org. You can freely reuse and adapt this visualisation with the license CC-BY-SA 4.0.
  </p>
</div>

<!--  The content below is fetched by greyrainbow.dataout.org -->

<div id="content_to_fetch">

  <div class="container-fluid" id="table_6_21">

  <div class="container-fluid" id="table-container">
    <div class="table-sm">
    <table class="table table-hover table-dark" id="data-table">
       <thead>
           <tr></tr>
       </thead>
       <tbody class="data-table-body"></tbody>
    </table>
    </div>

  </div>

  <div class="container-fluid" id="table_bottom">
  </div>

</div>

<script id="table_621">

// determine the language depending on the url
const pathname = window.location.pathname;
// check for 'ru'
let lang;
if (pathname.includes('-ru')) {
  lang = "ru";
} else {
  lang = "en";
}

// storing translations
const langData = {
  "table_header":{"ru":"<thead><tr><th>Год</th> <th>Номер дела</th> <th>Регион</th> <th>Статья</th> <th>Версия закона</th> <th>Ответчик</th> <th>Вид ответчика</th> <th>Вид правонарушения</th> <th>Вид наказания</th> </tr> </thead> <tbody>"}
}

// loading the lang content first time
loadLangContent(langData,lang);

const spreadsheetUrl = "https://docs.google.com/spreadsheets/d/1USSP39VxGxJaWKQIOMee7FTR5RquBW-KsV3-Yoad9-E/export?format=csv";

d3.csv(spreadsheetUrl).then(data => {
  generateTable(data,'ru')
})

// generate table: used for the full table and filtered
function generateTable(data,lang) {
  // header
  let tableHTML = langData["table_header"][lang];

    data.forEach(function(d) {
      // formatting cell values 
        
      if (lang === "ru") {
        tableHTML += "<tr><td>" + d.year + "</td><td>" + d.case_number + "</td><td>" + d.region + "</td><td>" + d.article + "</td><td>" + d.law_version + "</td><td>" + d.defendant + "</td><td>" + d.defendant_type + "</td><td>" + d.offence_type + "</td><td>" + d.punishment_type + "</td></tr>";
      }
  });

  tableHTML += "</tbody>";
  document.querySelector("#data-table").innerHTML = tableHTML;
}

// load lang content
function loadLangContent(langData, lang) {
  for (let elementId in langData) {
    let el = document.getElementById(elementId);
    if (el) {
      el.innerHTML = langData[elementId][lang];
    }
  }
}

</script>

</div>

<!--  The content above is fetched by greyrainbow.dataout.org -->

</body>
</html>